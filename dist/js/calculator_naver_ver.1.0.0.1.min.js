function Calculator(){var _self=this,_viewingOp="",_opExpression=[],_inputNum="",_checkComplete=!1,_calcMaxNum=9999999999;function _numberWithCommas(e){if(null==e||""===e||"."===e)return"";for(var o=e.toString().split("."),i=o[0].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),t=1;t<o.length;t++)i=i+"."+o[t];return i}_self._addNumber=function(e,o){if(void 0!==e&&void 0!==o){_checkComplete&&(o.opExpression.empty().append("0"),o.calcResult.empty(),_viewingOp=_inputNum="",_checkComplete=!(_opExpression=[]));var i=parseInt(_inputNum+e);i<1&&e<1&&_inputNum.indexOf(".")<0||(_calcMaxNum<i?alert("입력은 최대 10자리까지 가능합니다."):(_inputNum+=e,o.opExpression.empty().append(_viewingOp).append(_numberWithCommas(_inputNum)),_checkComplete=!1))}},_self._addDecimalPoint=function(e){void 0!==e&&(""===_inputNum&&(_inputNum="0"),_inputNum+=".",e.opExpression.append("."),_checkComplete=!1)},_self._addOperator=function(e,o){if(void 0!==e&&void 0!==o){var i="";switch(_opExpression.push(_inputNum),_inputNum="",e){case"add":i="+";break;case"sub":i="-";break;case"multi":i="*";break;case"div":i="/"}_opExpression.push(i),o.opExpression.append(i),_viewingOp=o.opExpression.text(),_checkComplete=!1}},_self._completeCalc=function(elem){if(void 0!==elem){if(""===_inputNum&&(_inputNum="0"),_checkComplete){if(1<_opExpression.length){_opExpression.push(_opExpression[_opExpression.length-2]),_opExpression.push(_opExpression[_opExpression.length-2]);var addOp=_opExpression[_opExpression.length-2]+_opExpression[_opExpression.length-1];elem.opExpression.empty().append(_viewingOp),elem.opExpression.append(addOp)}}else _opExpression.push(_inputNum),_inputNum="";_viewingOp=elem.opExpression.text();for(var text="",i=0;i<_opExpression.length;i++)text+=_opExpression[i];try{var result=eval(text);result=_numberWithCommas(result.toFixed(5).replace(/\.?0*$/g,"")),elem.calcResult.empty().append(result),_inputNum="",_checkComplete=!0}catch(e){alert("수식이 정확한지 확인해주세요.")}}},_self._clearCalc=function(e){void 0!==e&&(e.opExpression.empty().append("0"),e.calcResult.empty(),_viewingOp=_inputNum="",_checkComplete=!(_opExpression=[]))}}var g_calc={calculator:void 0};function RegisterCalculator(){var o=void 0,i={root:void 0,numBtn:void 0,decimal:void 0,complete:void 0,operation:void 0,reset:void 0,opExpression:void 0,calcResult:void 0};this.init=function(e){void 0!==e&&(i.root=e,void 0!==(o=new Calculator)&&(i.numBtn=i.root.find('button[data-elem="num"]'),i.decimal=i.root.find('button[data-elem="decimal"]'),i.complete=i.root.find('button[data-elem="complete"]'),i.operation=i.root.find('button[data-elem="operation"]'),i.reset=i.root.find('button[data-elem="reset"]'),i.opExpression=i.root.find('div[data-elem="opExpression"]'),i.calcResult=i.root.find('div[data-elem="calcResult"]'),i.numBtn.bind("click",function(){var e=$(this).data("num");o._addNumber(e,{opExpression:i.opExpression,calcResult:i.calcResult})}),i.decimal.bind("click",function(){o._addDecimalPoint({opExpression:i.opExpression,calcResult:i.calcResult})}),i.operation.bind("click",function(){var e=$(this).data("op");o._addOperator(e,{opExpression:i.opExpression,calcResult:i.calcResult})}),i.complete.bind("click",function(){o._completeCalc({opExpression:i.opExpression,calcResult:i.calcResult})}),i.reset.bind("click",function(){o._clearCalc({opExpression:i.opExpression,calcResult:i.calcResult})})))}}g_calc.calculator=new RegisterCalculator,g_calc.calculator.init($("#calcContainer"));